[ {
    "test": "env variables set, no command line arguments set and no workspace env variable set",
    "description": "",
    "cmd": "query",
    "setup": {
      "env": [
        "TAILPIPE_UPDATE_CHECK=false",
        "TAILPIPE_MEMORY_MAX_MB=16384",
        "TAILPIPE_PLUGIN_MEMORY_MAX_MB=2048",
        "TAILPIPE_TEMP_DIR_MAX_MB=8192"
      ],
      "args": []
    },
    "expected": {
      "update-check": "false",
      "memory-max-mb": 16384,
      "memory-max-mb-plugin": 2048,
      "temp-dir-max-mb": 8192
    }
  },
  {
    "test": "only command line arguments set and no env variables set",
    "description": "",
    "cmd": "query",
    "setup": {
      "env": [],
      "args": [
        "--workspace=workspace_profiles"
      ]
    },
    "expected": {
      "workspace": "workspace_profiles",
      "log-level": "trace",
      "update-check": "false",
      "memory-max-mb": 1024,
      "memory-max-mb-plugin": 512,
      "temp-dir-max-mb": 1024
    }
  },
  {
    "test": "workspace env variable set and no command line arguments set",
    "description": "",
    "cmd": "query",
    "setup": {
      "env": [
        "TAILPIPE_WORKSPACE=workspace_profiles"
      ],
      "args": []
    },
    "expected": {
      "workspace": "workspace_profiles",
      "log-level": "trace",
      "update-check": "false",
      "memory-max-mb": 1024,
      "memory-max-mb-plugin": 512,
      "temp-dir-max-mb": 1024
    }
  },
  {
    "test": "All env variables set and command line argument set",
    "description": "",
    "cmd": "query",
    "setup": {
      "env": [
        "TAILPIPE_WORKSPACE=development",
        "TAILPIPE_LOG_LEVEL=debug",
        "TAILPIPE_UPDATE_CHECK=false",
        "TAILPIPE_MEMORY_MAX_MB=16384",
        "TAILPIPE_MEMORY_MAX_MB_PLUGIN=2048",
        "TAILPIPE_TEMP_DIR_MAX_MB=8192"
      ],
      "args": [
        "--workspace=workspace_profiles"
      ]
    },
    "expected": {
      "workspace": "workspace_profiles",
      "log-level": "trace",
      "update-check": "false",
      "memory-max-mb": 1024,
      "memory-max-mb-plugin": 512,
      "temp-dir-max-mb": 1024
    }
  },
  {
    "test": "workspace env variable set and --workspace arg passed",
    "description": "",
    "cmd": "query",
    "setup": {
      "env": [
        "TAILPIPE_WORKSPACE=development"
      ],
      "args": [
        "--workspace=workspace_profiles"
      ]
    },
    "expected": {
      "workspace": "workspace_profiles",
      "log-level": "trace",
      "update-check": "false",
      "memory-max-mb": 1024,
      "memory-max-mb-plugin": 512,
      "temp-dir-max-mb": 1024
    }
  },
  {
    "test": "all env variables set including workspace env variable and no command line arguments set",
    "description": "",
    "cmd": "query",
    "setup": {
      "env": [
        "TAILPIPE_WORKSPACE=development",
        "TAILPIPE_LOG_LEVEL=debug",
        "TAILPIPE_UPDATE_CHECK=false",
        "TAILPIPE_MEMORY_MAX_MB=16384",
        "TAILPIPE_MEMORY_MAX_MB_PLUGIN=2048",
        "TAILPIPE_TEMP_DIR_MAX_MB=8192"
      ],
      "args": []
    },
    "expected": {
      "workspace": "development",
      "log-level": "warn",
      "update-check": "false",
      "memory-max-mb": 512,
      "memory-max-mb-plugin": 206,
      "temp-dir-max-mb": 512
    }
  },
  {
    "test": "all env variables set except workspace env variable and --workspace arg passed",
    "description": "",
    "cmd": "query",
    "setup": {
      "env": [
        "TAILPIPE_LOG_LEVEL=debug",
        "TAILPIPE_UPDATE_CHECK=false",
        "TAILPIPE_MEMORY_MAX_MB=16384",
        "TAILPIPE_MEMORY_MAX_MB_PLUGIN=2048",
        "TAILPIPE_TEMP_DIR_MAX_MB=8192"
      ],
      "args": [
        "--workspace=workspace_profiles"
      ]
    },
    "expected": {
      "workspace": "workspace_profiles",
      "log-level": "trace",
      "update-check": "false",
      "memory-max-mb": 1024,
      "memory-max-mb-plugin": 512,
      "temp-dir-max-mb": 1024
    }
  }
]